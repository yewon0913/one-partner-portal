<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ONE PARTNER 정책자금 진단</title>
  <link rel="icon" href="logo.png" type="image/png">
  <link rel="preconnect" href="https://cdn.jsdelivr.net">
  <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable-dynamic-subset.min.css" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Pretendard Variable', 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif;
      background-color: #0A1628;
      color: #FFFFFF;
      min-height: 100vh;
      overflow-x: hidden;
    }

    .app-container {
      max-width: 480px;
      margin: 0 auto;
      min-height: 100vh;
      position: relative;
      padding: 0 24px 40px;
    }

    /* Header */
    .header {
      text-align: center;
      padding: 24px 0 16px;
    }

    .logo {
      width: 100px;
      height: 100px;
      border-radius: 20px;
    }

    /* Progress Bar */
    .progress-container {
      margin-top: 12px;
      display: none;
    }

    .progress-container.visible {
      display: block;
    }

    .progress-track {
      height: 6px;
      background: #1E3A5F;
      border-radius: 3px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      border-radius: 3px;
      background: linear-gradient(90deg, #C9A84C, #E8D48B);
      transition: width 0.4s ease;
      width: 0%;
    }

    .progress-text {
      color: #8A9BB5;
      font-size: 13px;
      text-align: right;
      margin-top: 6px;
    }

    /* Back Button */
    .back-btn {
      background: none;
      border: none;
      color: #C9A84C;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      padding: 8px 4px;
      margin-bottom: 4px;
      display: none;
      font-family: inherit;
    }

    .back-btn.visible {
      display: block;
    }

    .back-btn:hover {
      opacity: 0.8;
    }

    /* Step Containers */
    .step {
      display: none;
      animation: fadeInDown 0.4s ease;
    }

    .step.active {
      display: block;
    }

    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Hero Section */
    .hero-section {
      text-align: center;
      margin: 40px 0;
    }

    .hero-title {
      font-size: 28px;
      font-weight: 800;
      line-height: 1.45;
      letter-spacing: -0.5px;
      color: #FFFFFF;
    }

    .hero-highlight {
      color: #C9A84C;
    }

    .hero-subtitle {
      font-size: 16px;
      color: #8A9BB5;
      margin-top: 16px;
      line-height: 1.5;
    }

    /* CTA Button */
    .cta-btn {
      display: block;
      width: 100%;
      padding: 18px;
      border: none;
      border-radius: 14px;
      background: linear-gradient(135deg, #A8893D, #C9A84C, #E8D48B);
      color: #0A1628;
      font-size: 19px;
      font-weight: 800;
      letter-spacing: 0.5px;
      cursor: pointer;
      margin-top: 8px;
      transition: transform 0.15s ease, opacity 0.15s ease;
      font-family: inherit;
    }

    .cta-btn:hover {
      opacity: 0.95;
    }

    .cta-btn:active {
      transform: scale(0.97);
    }

    .cta-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    /* Privacy Text */
    .privacy-text {
      color: #8A9BB5;
      font-size: 13px;
      text-align: center;
      margin-top: 20px;
      line-height: 1.5;
    }

    /* Question Text */
    .question-text {
      font-size: 24px;
      font-weight: 800;
      line-height: 1.5;
      margin-bottom: 28px;
      letter-spacing: -0.3px;
    }

    /* Option Cards */
    .options-grid {
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .option-card {
      background: #132240;
      border-radius: 14px;
      padding: 20px 24px;
      border: 1.5px solid #1E3A5F;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s ease;
      font-family: inherit;
      color: #FFFFFF;
      font-size: 18px;
      font-weight: 700;
      width: 100%;
    }

    .option-card:hover {
      border-color: #C9A84C;
      background: rgba(201, 168, 76, 0.08);
    }

    .option-card:active {
      transform: scale(0.97);
      opacity: 0.8;
    }

    .option-card.selected {
      border-color: #C9A84C;
      background: rgba(201, 168, 76, 0.1);
      color: #C9A84C;
    }

    /* Form Fields */
    .field-label {
      color: #8A9BB5;
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 10px;
      margin-top: 20px;
    }

    .text-input {
      width: 100%;
      background: #0D1E38;
      border-radius: 14px;
      padding: 18px 20px;
      border: 1.5px solid #1E3A5F;
      color: #FFFFFF;
      font-size: 16px;
      font-weight: 500;
      font-family: inherit;
      outline: none;
      transition: border-color 0.2s ease;
    }

    .text-input:focus {
      border-color: #C9A84C;
    }

    .text-input::placeholder {
      color: #8A9BB5;
    }

    /* Select Button */
    .select-btn {
      width: 100%;
      background: #0D1E38;
      border-radius: 14px;
      padding: 18px 20px;
      border: 1.5px solid #1E3A5F;
      color: #FFFFFF;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-family: inherit;
      text-align: left;
      transition: border-color 0.2s ease;
    }

    .select-btn:focus {
      border-color: #C9A84C;
    }

    .select-btn .placeholder {
      color: #8A9BB5;
    }

    .select-arrow {
      color: #C9A84C;
      font-size: 14px;
    }

    /* Region Dropdown */
    .region-list {
      background: #132240;
      border-radius: 14px;
      border: 1px solid #1E3A5F;
      margin-top: 8px;
      max-height: 240px;
      overflow-y: auto;
      display: none;
    }

    .region-list.open {
      display: block;
    }

    .region-list::-webkit-scrollbar {
      width: 4px;
    }

    .region-list::-webkit-scrollbar-thumb {
      background: #1E3A5F;
      border-radius: 2px;
    }

    .region-item {
      padding: 14px 20px;
      border-bottom: 0.5px solid #1E3A5F;
      cursor: pointer;
      color: #FFFFFF;
      font-size: 16px;
      transition: background 0.15s ease;
      font-family: inherit;
    }

    .region-item:hover {
      background: rgba(201, 168, 76, 0.08);
    }

    .region-item.selected {
      background: rgba(201, 168, 76, 0.1);
      color: #C9A84C;
      font-weight: 600;
    }

    .region-item:last-child {
      border-bottom: none;
    }

    /* Next Button */
    .next-btn {
      display: block;
      width: 100%;
      padding: 18px;
      border: none;
      border-radius: 14px;
      background: linear-gradient(135deg, #A8893D, #C9A84C, #E8D48B);
      color: #0A1628;
      font-size: 18px;
      font-weight: 800;
      cursor: pointer;
      margin-top: 32px;
      transition: transform 0.15s ease;
      font-family: inherit;
    }

    .next-btn:active {
      transform: scale(0.97);
    }

    /* Time Options */
    .time-options {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 8px;
    }

    .time-card {
      background: #132240;
      border-radius: 14px;
      padding: 16px 20px;
      border: 1.5px solid #1E3A5F;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s ease;
      color: #FFFFFF;
      font-size: 16px;
      font-weight: 600;
      font-family: inherit;
      width: 100%;
    }

    .time-card:hover {
      border-color: #C9A84C;
    }

    .time-card:active {
      transform: scale(0.97);
    }

    .time-card.selected {
      border-color: #C9A84C;
      background: rgba(201, 168, 76, 0.1);
      color: #C9A84C;
    }

    /* Completion Screen */
    .completion-container {
      text-align: center;
      animation: fadeInUp 0.4s ease;
    }

    .check-circle {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: rgba(201, 168, 76, 0.15);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 20px auto 24px;
      border: 2px solid #C9A84C;
    }

    .check-mark {
      color: #C9A84C;
      font-size: 36px;
      font-weight: 700;
    }

    .completion-title {
      font-size: 26px;
      font-weight: 800;
      margin-bottom: 12px;
    }

    .completion-subtitle {
      font-size: 16px;
      color: #8A9BB5;
      line-height: 1.5;
      margin-bottom: 32px;
    }

    /* Summary Card */
    .summary-card {
      background: #132240;
      border-radius: 16px;
      padding: 24px;
      border: 1px solid #1E3A5F;
      margin-bottom: 24px;
      text-align: left;
    }

    .summary-title {
      font-size: 18px;
      font-weight: 700;
      color: #C9A84C;
      margin-bottom: 16px;
    }

    .summary-row {
      display: flex;
      justify-content: space-between;
      padding: 10px 0;
      border-bottom: 0.5px solid #1E3A5F;
    }

    .summary-row:last-child {
      border-bottom: none;
    }

    .summary-label {
      color: #8A9BB5;
      font-size: 15px;
    }

    .summary-value {
      color: #FFFFFF;
      font-size: 15px;
      font-weight: 600;
    }

    /* Reset Button */
    .reset-btn {
      padding: 14px 32px;
      border-radius: 12px;
      border: 1.5px solid #C9A84C;
      background: transparent;
      color: #C9A84C;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: opacity 0.15s ease;
      font-family: inherit;
    }

    .reset-btn:hover {
      opacity: 0.8;
    }

    /* Watermark */
    .watermark {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 300px;
      height: 300px;
      opacity: 0.03;
      pointer-events: none;
      z-index: 0;
    }

    .app-container {
      position: relative;
      z-index: 1;
    }
  </style>
</head>
<body>
  <!-- Watermark -->
  <img src="logo.png" class="watermark" alt="">

  <div class="app-container">
    <!-- Header -->
    <div class="header">
      <img src="logo.png" alt="ONE PARTNER" class="logo">
      <div class="progress-container" id="progressContainer">
        <div class="progress-track">
          <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="progress-text" id="progressText">1 / 4 단계</div>
      </div>
    </div>

    <!-- Back Button -->
    <button class="back-btn" id="backBtn" onclick="goBack()">← 이전</button>

    <!-- Step 1: Landing -->
    <div class="step active" id="step1">
      <div class="hero-section">
        <h1 class="hero-title">
          2026년 정책자금<br>승인 가능성,<br>
          <span class="hero-highlight">1분 만에 확인하세요.</span>
        </h1>
        <p class="hero-subtitle">ONE PARTNER가 무료로 진단해 드립니다.</p>
      </div>
      <button class="cta-btn" onclick="goToStep(2)">무료 진단 시작하기</button>
      <p class="privacy-text">개인정보는 오직 정책자금 진단 목적으로만 사용됩니다</p>
    </div>

    <!-- Step 2: Industry -->
    <div class="step" id="step2">
      <h2 class="question-text">운영 중인 사업의<br>업종을 선택해주세요.</h2>
      <div class="options-grid" id="industryOptions">
        <button class="option-card" onclick="selectIndustry(this, '제조업')">제조업</button>
        <button class="option-card" onclick="selectIndustry(this, '도·소매업')">도·소매업</button>
        <button class="option-card" onclick="selectIndustry(this, '요식업')">요식업</button>
        <button class="option-card" onclick="selectIndustry(this, '서비스업')">서비스업</button>
        <button class="option-card" onclick="selectIndustry(this, '기타')">기타</button>
      </div>
    </div>

    <!-- Step 3: Region & Company -->
    <div class="step" id="step3">
      <h2 class="question-text">사업장 소재지와<br>업체명을 입력해주세요.</h2>

      <div class="field-label">지역 선택</div>
      <button class="select-btn" id="regionSelectBtn" onclick="toggleRegionList()">
        <span id="regionDisplay" class="placeholder">시/도를 선택해주세요</span>
        <span class="select-arrow">▼</span>
      </button>

      <div class="region-list" id="regionList"></div>

      <div class="field-label">업체명</div>
      <input type="text" class="text-input" id="companyName" placeholder="업체명을 입력해주세요">

      <button class="next-btn" onclick="validateStep3()">다음</button>
    </div>

    <!-- Step 4: Funding -->
    <div class="step" id="step4">
      <h2 class="question-text">희망하시는 정책자금<br>규모는 얼마인가요?</h2>
      <div class="options-grid" id="fundingOptions">
        <button class="option-card" onclick="selectFunding(this, '5천만 원 이하')">5천만 원 이하</button>
        <button class="option-card" onclick="selectFunding(this, '1억 원 내외')">1억 원 내외</button>
        <button class="option-card" onclick="selectFunding(this, '2억 원 이상')">2억 원 이상</button>
        <button class="option-card" onclick="selectFunding(this, '미정')">미정</button>
      </div>
    </div>

    <!-- Step 5: Contact -->
    <div class="step" id="step5">
      <h2 class="question-text">상담 받으실 성함과<br>연락처를 남겨주세요.</h2>

      <div class="field-label">성함</div>
      <input type="text" class="text-input" id="contactName" placeholder="성함을 입력해주세요">

      <div class="field-label">연락처</div>
      <input type="tel" class="text-input" id="contactPhone" placeholder="010-0000-0000">

      <div class="field-label">통화 가능 시간</div>
      <div class="time-options" id="timeOptions">
        <button class="time-card" onclick="selectTime(this, '오전 (9시~12시)')">오전 (9시~12시)</button>
        <button class="time-card" onclick="selectTime(this, '오후 (12시~18시)')">오후 (12시~18시)</button>
        <button class="time-card" onclick="selectTime(this, '저녁 (18시 이후)')">저녁 (18시 이후)</button>
        <button class="time-card" onclick="selectTime(this, '언제든 가능')">언제든 가능</button>
      </div>

      <button class="cta-btn" id="submitBtn" onclick="handleSubmit()">진단 결과 신청하기</button>
      <p class="privacy-text">개인정보는 오직 정책자금 진단 목적으로만 사용됩니다</p>
    </div>

    <!-- Step 6: Completion -->
    <div class="step" id="step6">
      <div class="completion-container">
        <div class="check-circle">
          <span class="check-mark">✓</span>
        </div>
        <h2 class="completion-title">신청이 완료되었습니다!</h2>
        <p class="completion-subtitle">빠른 시일 내에 전문 컨설턴트가<br>연락드리겠습니다.</p>

        <div class="summary-card" id="summaryCard"></div>

        <button class="reset-btn" onclick="resetForm()">처음으로 돌아가기</button>
      </div>
    </div>
  </div>

  <script>
    // State
    let currentStep = 1;
    const formData = {
      industry: '',
      region: '',
      companyName: '',
      fundingAmount: '',
      contactName: '',
      contactPhone: '',
      preferredTime: ''
    };

    const REGIONS = [
      '서울특별시', '부산광역시', '대구광역시', '인천광역시', '광주광역시',
      '대전광역시', '울산광역시', '세종특별자치시', '경기도', '강원도',
      '충청북도', '충청남도', '전라북도', '전라남도', '경상북도',
      '경상남도', '제주특별자치도'
    ];

    // Initialize region list
    function initRegionList() {
      const list = document.getElementById('regionList');
      REGIONS.forEach(region => {
        const item = document.createElement('div');
        item.className = 'region-item';
        item.textContent = region;
        item.onclick = () => selectRegion(region);
        list.appendChild(item);
      });
    }

    // Navigation
    function goToStep(step) {
      document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
      document.getElementById('step' + step).classList.add('active');
      currentStep = step;
      updateProgress();
      updateBackButton();
      window.scrollTo({ top: 0, behavior: 'instant' });
    }

    function goBack() {
      if (currentStep > 1) {
        goToStep(currentStep - 1);
      }
    }

    function updateProgress() {
      const container = document.getElementById('progressContainer');
      const fill = document.getElementById('progressFill');
      const text = document.getElementById('progressText');

      if (currentStep === 1 || currentStep === 6) {
        container.classList.remove('visible');
        return;
      }

      container.classList.add('visible');
      const progress = ((currentStep - 1) / 4) * 100;
      fill.style.width = progress + '%';
      text.textContent = (currentStep - 1) + ' / 4 단계';
    }

    function updateBackButton() {
      const btn = document.getElementById('backBtn');
      if (currentStep > 1 && currentStep < 6) {
        btn.classList.add('visible');
      } else {
        btn.classList.remove('visible');
      }
    }

    // Step 2: Industry
    function selectIndustry(el, value) {
      document.querySelectorAll('#industryOptions .option-card').forEach(c => c.classList.remove('selected'));
      el.classList.add('selected');
      formData.industry = value;
      setTimeout(() => goToStep(3), 200);
    }

    // Step 3: Region
    function toggleRegionList() {
      const list = document.getElementById('regionList');
      list.classList.toggle('open');
    }

    function selectRegion(region) {
      formData.region = region;
      const display = document.getElementById('regionDisplay');
      display.textContent = region;
      display.classList.remove('placeholder');
      document.getElementById('regionList').classList.remove('open');

      // Update selected state
      document.querySelectorAll('.region-item').forEach(item => {
        item.classList.toggle('selected', item.textContent === region);
      });
    }

    function validateStep3() {
      if (!formData.region) {
        alert('지역을 선택해주세요.');
        return;
      }
      const companyName = document.getElementById('companyName').value.trim();
      if (!companyName) {
        alert('업체명을 입력해주세요.');
        return;
      }
      formData.companyName = companyName;
      goToStep(4);
    }

    // Step 4: Funding
    function selectFunding(el, value) {
      document.querySelectorAll('#fundingOptions .option-card').forEach(c => c.classList.remove('selected'));
      el.classList.add('selected');
      formData.fundingAmount = value;
      setTimeout(() => goToStep(5), 200);
    }

    // Step 5: Time
    function selectTime(el, value) {
      document.querySelectorAll('#timeOptions .time-card').forEach(c => c.classList.remove('selected'));
      el.classList.add('selected');
      formData.preferredTime = value;
    }

    // Submit
    async function handleSubmit() {
      const contactName = document.getElementById('contactName').value.trim();
      const contactPhone = document.getElementById('contactPhone').value.trim();

      if (!contactName || !contactPhone) {
        alert('성함과 연락처를 모두 입력해주세요.');
        return;
      }
      if (!formData.preferredTime) {
        alert('통화 가능 시간을 선택해주세요.');
        return;
      }

      formData.contactName = contactName;
      formData.contactPhone = contactPhone;

      const btn = document.getElementById('submitBtn');
      btn.disabled = true;
      btn.textContent = '신청 중...';

      try {
        const payload = {
          ...formData,
          submittedAt: new Date().toLocaleString('ko-KR'),
          type: 'lead'
        };
        await fetch('/api/submit-lead', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });
      } catch (e) {
        console.log('Submission recorded locally:', formData);
      }

      showCompletion();
      btn.disabled = false;
      btn.textContent = '진단 결과 신청하기';
    }

    // Completion
    function showCompletion() {
      const card = document.getElementById('summaryCard');
      const rows = [
        ['업종', formData.industry],
        ['지역', formData.region],
        ['업체명', formData.companyName],
        ['희망 자금', formData.fundingAmount],
        ['성함', formData.contactName],
        ['연락처', formData.contactPhone],
        ['통화 시간', formData.preferredTime]
      ];

      card.innerHTML = '<div class="summary-title">신청 내역</div>' +
        rows.map(([label, value]) =>
          `<div class="summary-row">
            <span class="summary-label">${label}</span>
            <span class="summary-value">${value}</span>
          </div>`
        ).join('');

      goToStep(6);
    }

    // Reset
    function resetForm() {
      Object.keys(formData).forEach(key => formData[key] = '');
      document.getElementById('companyName').value = '';
      document.getElementById('contactName').value = '';
      document.getElementById('contactPhone').value = '';
      document.querySelectorAll('.option-card, .time-card').forEach(c => c.classList.remove('selected'));
      const display = document.getElementById('regionDisplay');
      display.textContent = '시/도를 선택해주세요';
      display.classList.add('placeholder');
      document.querySelectorAll('.region-item').forEach(item => item.classList.remove('selected'));
      goToStep(1);
    }

    // Init
    initRegionList();
  </script>
</body>
</html>
